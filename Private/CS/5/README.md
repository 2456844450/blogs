# 优化程序性能

编写高效程序需要做到以下几点：

  1. 我们必须选择一组适当的算法和数据结构。
  2. 我们必须编写出编译器能够有效优化以转换成高效可执行代码的源代码。


## 优化编译器的能力和局限性

现代编译器运用复杂精细的算法来确定一个程序中计算的是什么值，以及它们是被如何使用的。然后会利用一些机会来简化表达式，在几个不同的地方使用同一个计算，以及降低一个给定的计算必须执行的次数。大多数编译器，包括 GCC 是可以指定优化等级的，以选项 `-Og` 调用 GCC 是让 GCC 使用一组基本的优化。以选项 “-O1” 或更高（如 `-O2、-O3`）调用 GCC 会让它使用更大量的优化。

下面是一个案例（如下图）

![image](http://shadows-mall.oss-cn-shenzhen.aliyuncs.com/images/assets/cs/146.png)